<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小鳥Lab</title>
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="html,css,javascript,小鳥Lab">
    <link rel="icon" href="./img/和logo.ico">
    <meta name="description" content="webサイト体験をもっと楽しく簡単に!!">
    <meta property="og:image" content="./img/和logo.avif">
    <meta property="og:title" content="小鳥Lab">
    <meta property="og:site_name" content="小鳥Lab">
    <meta property="og:description" content="webサイト体験をもっと楽しく簡単に!!">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;700&display=swap');
        [x-cloak] { display: none !important; }
        body { 
            font-family: 'Shippori Mincho', serif; 
            background-color: #f8f7f4;
            background-image: url('https://www.transparenttextures.com/patterns/handmade-paper.png'); 
        }
        .animation-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        .writing-vertical { writing-mode: vertical-rl; }
        .animate-in { animation: fade-in 1.2s ease-out forwards; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* 入力欄の微調整 */
        input::placeholder, textarea::placeholder { color: #d1d5db; }
    </style>
</head>
<body class="select-none bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-rose-50 via-stone-100 to-orange-50 min-h-screen flex items-center justify-center p-4 sm:p-6 text-stone-700 antialiased overflow-hidden relative" oncontextmenu="return false;">

    <div id="stalker"></div>
    <div id="loading"></div>
    <canvas class="animation-canvas"></canvas>

    <div class="relative z-10 w-full max-w-5xl bg-white/70 backdrop-blur-3xl border border-white rounded-[2rem] shadow-2xl shadow-rose-200/30 overflow-hidden flex flex-col md:flex-row animate-in" x-data="contactForm()">
        
        <div class="md:w-5/12 p-10 flex flex-col justify-between border-b md:border-b-0 md:border-r border-stone-200 relative bg-gradient-to-b from-rose-100/40 to-white/20">
            <div class="absolute top-0 right-4 p-8 opacity-10 text-4xl font-bold writing-vertical tracking-[0.6em] text-stone-900 pointer-events-none">お問い合わせ</div>
            
            <div class="relative">
                <div class="inline-block px-4 py-1.5 bg-rose-500 text-white text-[10px] tracking-[0.2em] mb-6 rounded-full font-sans font-bold shadow-md shadow-rose-200">CONTACT US</div>
                <h2 class="text-4xl font-bold mb-6 tracking-widest text-stone-800 leading-tight">
                    小鳥Lab研究所<br>
                    <span class="text-lg opacity-40 font-light italic tracking-normal">IT Technology Research Institute.</span>
                </h2>
                <div class="space-y-4 text-stone-600 leading-relaxed text-sm">
                    <p class="font-bold">新たな発見、豊かな生活。</p>
                    <p>
                        日々移ろいゆく世界の形、<br>
                        ITであなたの生活をお手伝いをいたします。<br>
                        些細なことでも、お気軽にお尋ねください。
                    </p>
                </div>
            </div>
            
            <div class="mt-12 space-y-5">
                <div class="flex items-center gap-4 group">
                    <div class="w-11 h-11 bg-white rounded-2xl flex items-center justify-center shadow-sm text-rose-400 group-hover:bg-rose-500 group-hover:text-white transition-all duration-300">
                        <i data-lucide="map-pin" class="w-5 h-5"></i>
                    </div>
                    <div class="text-sm">
                        <p class="text-[10px] text-stone-400 font-sans tracking-widest uppercase">Location</p>
                        <p class="font-bold tracking-wider">群馬県伊勢崎市エリア</p>
                    </div>
                </div>
                <div class="flex items-center gap-4 group">
                    <div class="w-11 h-11 bg-white rounded-2xl flex items-center justify-center shadow-sm text-teal-500 group-hover:bg-teal-500 group-hover:text-white transition-all duration-300">
                        <i data-lucide="mail" class="w-5 h-5"></i>
                    </div>
                    <div class="text-sm">
                        <p class="text-[10px] text-stone-400 font-sans tracking-widest uppercase">Email Address</p>
                        <p class="font-sans font-medium">kotori.lab.com@gmail.com</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="md:w-7/12 p-8 sm:p-12 relative bg-white/10">
            
            <div x-show="submitted" x-cloak x-transition.opacity.duration.500ms
                 class="absolute inset-0 bg-white/95 backdrop-blur-xl z-20 flex flex-col items-center justify-center text-center p-10 rounded-2xl">
                <div class="w-20 h-20 bg-rose-50 text-rose-500 rounded-full flex items-center justify-center mb-6 animate-bounce">
                    <i data-lucide="heart" class="w-10 h-10"></i>
                </div>
                <h3 class="text-2xl font-bold mb-3 text-stone-800 tracking-widest">想いを承りました</h3>
                <p class="text-stone-500 mb-10 text-sm leading-relaxed">
                    お問い合わせありがとうございます。<br>
                    担当者が内容を拝見し、3営業日以内にご連絡いたします。
                </p>
                <button @click="submitted = false" class="px-10 py-3 bg-stone-800 text-white text-xs tracking-[0.4em] rounded-full hover:bg-rose-500 transition-all shadow-lg">一覧に戻る</button>
            </div>

            <form @submit.prevent="submitForm" class="space-y-8">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                    <div class="space-y-2">
                        <label class="text-[10px] font-bold tracking-[0.3em] text-rose-500 flex items-center gap-2">
                            <i data-lucide="user" class="w-3 h-3"></i> お名前
                        </label>
                        <input type="text" x-model="formData.name" required placeholder="小鳥 太郎"
                               class="w-full bg-white/50 border-b-2 border-stone-100 px-2 py-3 outline-none transition-all focus:border-rose-400 text-stone-800">
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] font-bold tracking-[0.3em] text-teal-600 flex items-center gap-2">
                            <i data-lucide="at-sign" class="w-3 h-3"></i> 電子メール
                        </label>
                        <input type="email" x-model="formData.email" autocomplete="email" inputmode="email" required placeholder="info@example.jp"
                               class="w-full bg-white/50 border-b-2 border-stone-100 px-2 py-3 outline-none transition-all focus:border-teal-400 text-stone-800 font-sans">
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="text-[10px] font-bold tracking-[0.3em] text-stone-400 flex items-center gap-2">
                        <i data-lucide="tag" class="w-3 h-3"></i> 御用件
                    </label>
                    <div class="relative">
                        <select x-model="formData.subject" required
                                class="w-full bg-white/50 border-b-2 border-stone-100 px-2 py-3 outline-none appearance-none cursor-pointer text-stone-700 focus:border-stone-400">
                            <option value="">選択してください</option>
                            <option value="商品・サービスについて">商品・サービスについて</option>
                            <option value="お見積りのご依頼">お見積りのご相談</option>
                            <option value="不具合・バグのご報告">不具合・バグのご報告</option>
                            <option value="その他のお問い合わせ">その他のお問い合わせ</option>
                        </select>
                        <i data-lucide="chevron-down" class="absolute right-2 top-4 w-4 h-4 opacity-30"></i>
                    </div>
                </div>

                <div class="space-y-2">
                    <label class="text-[10px] font-bold tracking-[0.3em] text-stone-400 flex items-center gap-2">
                        <i data-lucide="message-circle" class="w-3 h-3"></i> 本文
                    </label>
                    <textarea x-model="formData.message" rows="4" required placeholder="具体的な内容をご記入くださいませ..."
                              class="w-full bg-white/50 border border-stone-100 rounded-xl p-4 outline-none transition-all focus:border-rose-200 focus:bg-white/80 text-stone-800 resize-none"></textarea>
                </div>

                <div class="flex items-center gap-3 px-2 py-4">
                    <label class="relative flex items-center cursor-pointer">
                        <input type="checkbox" x-model="formData.agreement" required 
                            class="peer h-5 w-5 cursor-pointer appearance-none rounded border border-stone-200 transition-all checked:bg-rose-400 checked:border-rose-400" />
                        <span class="absolute text-white opacity-0 peer-checked:opacity-100 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 pointer-events-none">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                            </svg>
                        </span>
                    </label>
                    <span class="text-xs text-stone-400 tracking-wider">
                        <a href="privacy.html" target="_blank" class="text-rose-400 hover:underline decoration-rose-200 underline-offset-4">個人情報の取り扱い</a> に同意する
                    </span>
                </div>

                <button type="submit" :disabled="loading"
                        class="w-full bg-rose-400 hover:bg-rose-500 text-white font-bold py-5 rounded-full shadow-lg shadow-rose-200 transition-all duration-500 hover:scale-[1.01] active:scale-[0.98] flex items-center justify-center gap-3 disabled:opacity-50">
                    <span x-show="!loading" class="text-sm tracking-[0.8em] flex items-center gap-2 ml-2">
                        送信する <i data-lucide="send" class="w-4 h-4"></i>
                    </span>
                    <span x-show="loading" class="text-sm tracking-[0.2em]">お届けしております...</span>
                </button>
            </form>
        </div>
    </div>

    <script>
        class SakuraAnimation {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.petals = [];
                this.resize();
                window.addEventListener('resize', () => this.resize());
                this.init();
                this.animate();
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            init() {
                for (let i = 0; i < 75; i++) {
                    this.petals.push({
                        x: Math.random() * this.canvas.width,
                        y: Math.random() * this.canvas.height,
                        size: Math.random() * 8 + 10,
                        speed: Math.random() * 0.7 + 0.3,
                        wind: Math.random() * 0.6 - 0.3,
                        angle: Math.random() * 360,
                        rotateSpeed: Math.random() * 1.2 - 0.6,
                        flip: Math.random() * Math.PI,
                        flipSpeed: Math.random() * 0.04 + 0.01,
                        swing: Math.random() * Math.PI, // 左右の揺れ用
                        swingSpeed: Math.random() * 0.02 + 0.01,
                        color: `rgba(255, ${215 + Math.random() * 25}, ${225 + Math.random() * 20}, ${0.5 + Math.random() * 0.4})`
                    });
                }
            }

            drawPetal(p) {
                const { ctx } = this;
                ctx.save();
                
                // 物理的な動きを統合
                const offsetX = Math.sin(p.swing) * 15;
                ctx.translate(p.x + offsetX, p.y);
                ctx.rotate(p.angle * Math.PI / 180);
                
                // 回転による厚みの変化
                const scaleX = Math.cos(p.flip);
                ctx.scale(scaleX, 1);

                ctx.beginPath();
                ctx.fillStyle = p.color;

                const s = p.size;
                // --- 鋭利な桜の花びら形状 ---
                ctx.moveTo(0, 0); // 根元 (非常に細く)
                
                // 左側のカーブ (根元を絞り、先端を広げる)
                ctx.bezierCurveTo(-s * 0.4, -s * 0.5, -s * 1.2, -s * 1.1, -s * 0.4, -s * 2.0);
                
                // 先端のV字切れ込み (さらに深く、鋭く)
                ctx.lineTo(0, -s * 1.5); // 切れ込みの中心を深く
                
                // 先端の右角
                ctx.lineTo(s * 0.4, -s * 2.0);
                
                // 右側のカーブ
                ctx.bezierCurveTo(s * 1.2, -s * 1.1, s * 0.4, -s * 0.5, 0, 0);

                ctx.fill();
                ctx.restore();
            }

            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.petals.forEach(p => {
                    p.y += p.speed;
                    p.x += p.wind;
                    p.angle += p.rotateSpeed;
                    p.flip += p.flipSpeed;
                    p.swing += p.swingSpeed;

                    if (p.y > this.canvas.height + 40) {
                        p.y = -40;
                        p.x = Math.random() * this.canvas.width;
                    }
                    this.drawPetal(p);
                });
                requestAnimationFrame(() => this.animate());
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new SakuraAnimation(document.querySelector('.animation-canvas'));
            lucide.createIcons();
        });

        // 送信ロジック完全版
        function contactForm() {
            return {
                // agreement を追加
                formData: { name: '', email: '', subject: '', message: '', agreement: false },
                loading: false,
                submitted: false,
                async submitForm() {
                    // チェックされていない場合は送信させない（HTMLのrequiredでも防げますが念のため）
                    if(!this.formData.agreement) {
                        alert("個人情報の取り扱いに同意をお願いいたします。");
                        return;
                    }
                    this.loading = true;
                    const gasUrl = "https://script.google.com/macros/s/AKfycbyDheP3h-C3_rXbqtw1NmEPSQvFjvOu8kfQ07M0-hGpKRE5u5Pup_3BD8whbYwfVKje/exec";
                    try {
                        const response = await fetch(gasUrl, {
                            method: "POST",
                            body: JSON.stringify(this.formData)
                        });
                        if (response.ok) {
                            this.submitted = true;
                            this.formData = { name: '', email: '', subject: '', message: '' };
                        } else { throw new Error('送信エラー'); }
                    } catch (error) {
                        console.error(error);
                        alert("送信に失敗しました。再度お試しください。");
                    } finally { this.loading = false; }
                }
            }
        }
    </script>
</body>
</html>