<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°é³¥Lab</title>
    <link rel="stylesheet" href="import.css">
    <meta name="robots" content="index, follow">
    <meta name="keywords" content="html,css,javascript,å°é³¥Lab">
    <link rel="icon" href="./img/å’Œlogo.ico">
    <meta name="description" content="webã‚µã‚¤ãƒˆä½“é¨“ã‚’ã‚‚ã£ã¨æ¥½ã—ãç°¡å˜ã«!!">
    <meta property="og:image" content="./img/å’Œlogo.avif">
    <meta property="og:title" content="å°é³¥Lab">
    <meta property="og:site_name" content="å°é³¥Lab">
    <meta property="og:description" content="webã‚µã‚¤ãƒˆä½“é¨“ã‚’ã‚‚ã£ã¨æ¥½ã—ãç°¡å˜ã«!!">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body class="fs-h6 us-n bg-container-img5" oncontextmenu="return false;">
    <div id="stalker"></div>
    <div id="loading"></div>

<!--/////-->

    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; background: #f0f0f0; -webkit-text-size-adjust: 100%; -moz-text-size-adjust: 100%;}
        body {
            /* PCè¡¨ç¤ºæ™‚ã«æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’å¯èƒ½ã«ã™ã‚‹ */
            overflow-x: auto;
            min-width: 320px; /* æœ€å°å¹…ã¯ç¶­æŒ */
        }

        /* PCãƒ¢ãƒ¼ãƒ‰æ™‚ã¯ã‚³ãƒ³ãƒ†ãƒŠãŒæ½°ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ */
        [data-mode='desktop'] #canvas-container {
            margin: 0 auto;
        }
        /* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒªã‚¢ */
        #canvas-container {
            position: relative;
            width: 800px;
            height: 500px; /* èƒŒæ™¯ç”»åƒã®ã‚µã‚¤ã‚ºã«åˆã‚ã›ã¦èª¿æ•´ã—ã¦ãã ã•ã„ */
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-bottom: 20px;
            background: #ccc;
            overflow: hidden;
        }
        #bg-image { width: 100%; height: 100%; object-fit: cover; }

        /* ãƒ†ã‚­ã‚¹ãƒˆã®é…ç½® */
        .overlay {
            position: absolute;
            color: rgb(0, 0, 0);
            z-index: 10;
            pointer-events: none; /* æ“ä½œã®é‚ªé­”ã«ãªã‚‰ãªã„ã‚ˆã†ã« */
        }
        #text-out-1 { top: 27px; left: 110px; font-size: 24px; }
        #text-out-2 { 
            top: 27px; 
            left: 66.7%; 
            font-size: 26px; 
            letter-spacing: 0.12rem; 
            display: flex;
            align-items: baseline;
        }
        #text-out-3 { 
            top: 43%; 
            left: 100px; 
            font-size: 24px; 
            transform: scale(0.7, 1); /* æ¨ªã‚’0.7å€ã«å‡ç¸® */
            transform-origin: left center; /* å·¦ç«¯ã‚’èµ·ç‚¹ã«å¤‰å½¢ã•ã›ã‚‹ã“ã¨ã§ã‚ºãƒ¬ã‚’è§£æ¶ˆ */
            display: inline-block; /* scaleã‚’æ­£ã—ãé©ç”¨ã™ã‚‹ãŸã‚ã«å¿…è¦ */
            white-space: nowrap;
            line-height: 25px;
        }
        #text-out-4 { 
            top: 99px; 
            left: 110px; 
            font-size: 24px; 
            transform: scale(0.7, 1); /* æ¨ªã‚’0.7å€ã«å‡ç¸® */
            transform-origin: left center; /* å·¦ç«¯ã‚’èµ·ç‚¹ã«å¤‰å½¢ã•ã›ã‚‹ã“ã¨ã§ã‚ºãƒ¬ã‚’è§£æ¶ˆ */
            display: inline-block; /* scaleã‚’æ­£ã—ãé©ç”¨ã™ã‚‹ãŸã‚ã«å¿…è¦ */
            white-space: nowrap;
        }

        .date-num {
            font-size: 0.8em;      /* 0.8å€ã«ç¸®å° */
            font-weight: 400;      /* æ¥µå¤ªã« */
            font-family: sans-serif; /* æ•°å­—ã‚’è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚´ã‚·ãƒƒã‚¯ç³»ã‚’æŒ‡å®š */
            margin: 0 2px;         /* æ•°å­—ã®å·¦å³ã®å¾®èª¿æ•´ */
        }

        /* æ¼¢å­—éƒ¨åˆ†ï¼ˆå¹´ãƒ»æœˆãƒ»æ—¥ï¼‰ã®å¾®èª¿æ•´ */
        .unit {
            font-size: 0.7em;
            font-weight: 400;
            margin-left: 2px;
            margin-right: 4.5px;
        }

        .date-hatena {
            font-size: 0.8em;      /* 0.8å€ã«ç¸®å° */
            font-weight: 400;      /* æ¥µå¤ªã« */
            font-family: sans-serif; /* æ•°å­—ã‚’è¦‹ã‚„ã™ãã™ã‚‹ãŸã‚ã«ã‚´ã‚·ãƒƒã‚¯ç³»ã‚’æŒ‡å®š */
            margin: 0 4px;         /* æ•°å­—ã®å·¦å³ã®å¾®èª¿æ•´ */
        }

        /* å†™çœŸæ ã®è¨­å®š */
        #photo-frame {
            position: absolute;
            right: 35px;
            top: 49.5%;
            transform: translateY(-50%);
            width: 210px;
            height: 283px;
            overflow: hidden;
            background: rgba(255,255,255,0.3);
            border: 1px dashed rgba(0,0,0,0.2);
            z-index: 5;
        }

        /* ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆJSã§åˆ¶å¾¡ï¼‰ */
        #uploaded-image {
            position: absolute;
            display: none;
            max-width: none; /* 100%åˆ¶é™ã‚’å¤–ã™ */
            max-height: none; /* 100%åˆ¶é™ã‚’å¤–ã™ */
            object-fit: contain;
        }

        /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  */
        .controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 460px;
        }
        input[type="text"] { padding: 8px; font-size: 16px; border: 1px solid #ccc; border-radius: 4px; }
        .slider-group { display: flex; flex-direction: column; margin-top: 5px; }
        .slider-group label { font-size: 12px; color: #666; }
        button {
            padding: 12px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            -webkit-appearance: none;
        }
        button:hover { background: #218838; }

        /* Firefoxå‘ã‘ã®å¾®èª¿æ•´ */
        @-moz-document url-prefix() {
            .overlay {
                /* Firefoxã§3pxä¸Šã«ã‚ºãƒ¬ã‚‹åˆ†ã€ä¸‹ã«è£œæ­£ */
                margin-top: 3px;
            }
            #text-expire {
                margin-top: 5px;
            }
        }
    </style>
</head>

<body>
    <div class="input-item">
        <button id="desktop-mode-btn" style="background-color: #6c757d; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer; width: 100%;">
            ğŸ’» PCç‰ˆè¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ãˆã‚‹
        </button>
        <p style="font-size: 11px; color: #666; margin-top: 5px;">
            â€»ä¿å­˜æ™‚ã«ç”»åƒãŒã‚ºãƒ¬ã‚‹å ´åˆã¯ã€ã“ã¡ã‚‰ã‚’æŠ¼ã—ã¦ã‹ã‚‰ä¿å­˜ã—ã¦ãã ã•ã„ã€‚
        </p>
    </div>

    <div id="canvas-container">
        <img id="bg-image" src="img/å…è¨±-resize.avif" crossorigin="anonymous">
        
        <div id="text-out-1" class="overlay">å±±ç”°ã€€å¤ªéƒ</div>
        <div id="text-out-2" class="overlay">0000<span class="unit">å¹´</span>00<span class="unit">æœˆ</span>00<span class="unit">æ—¥ç”Ÿ</span></div>
        <div id="text-out-3" class="overlay" style="margin-top: 12px;">å…è¨±ã®æ¡ä»¶ç­‰</div>
        <div id="text-out-4" class="overlay">ãƒ”ãƒãƒ‘ãƒ¼ã‚¯ã‚«ã‚¤ãƒ³ã‚ºå‰æ©‹ã¿ãªã¿ãƒ¢ãƒ¼ãƒ«åº—</div>
        
        <div id="photo-frame">
            <img id="uploaded-image" src="" alt="è‡ªç”±ç”»åƒ">
        </div>

        <div id="text-expire" class="overlay" style="top: 155px; left: 45px; color: rgb(0, 0, 0); font-size: 44px; letter-spacing: 0.12rem; "></div>
        <div id="text-kofu" class="overlay" style="top: 127px; left: 138px; font-size: 30px; letter-spacing: 0.12rem;"></div>
        <div id="text-walk" class="overlay" style="top: 376px; left: 84px; font-size: 27px; letter-spacing: 0.03rem;"></div>
        <div id="text-other" class="overlay" style="top: 407px; left: 84px; font-size: 27px; letter-spacing: 0.03rem;"></div>
        <div id="text-car" class="overlay" style="top: 438px; left: 86px; font-size: 27px; letter-spacing: 0.03rem;"></div>
    </div>

    <div class="controls">
        <label>åå‰:</label>
        <input type="text" id="input-1" placeholder="åå‰ã‚’å…¥åŠ›">
        
        <label>ç”Ÿå¹´æœˆæ—¥ (8æ¡):</label>
        <input type="text" id="input-2" maxlength="8" placeholder="ä¾‹: 20000101">
        
        <div class="input-item">
            <label>ãŠç´„æŸï¼ˆæœ€å¤§4é …ç›®ã¾ã§ï¼‰</label>
            
            <div id="checkbox-area" style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-bottom: 10px; background: #f9f9f9; padding: 10px; border-radius: 8px;">
                <label><input type="checkbox" class="preset-check" value="æ–œã‚77åº¦ã®ä¸¦ã³ã§æ³£ãæ³£ãå˜¶ããƒŠãƒŠãƒãƒ³7å°é›£ãªãä¸¦ã¹ã¦é•·çœºã‚"> é™ç•Œæ–‡å­—æ•°test</label>
                <label><input type="checkbox" class="preset-check" value="æ¬¡å›ã€åŸä¹‹å†…æ­»ã™ã€‚ã€€ãƒ‡ãƒ¥ã‚¨ãƒ«ã‚¹ã‚¿ãƒ³ãƒã‚¤!!!"> åŸä¹‹å†…</label>
                <label><input type="checkbox" class="preset-check" value="â†²"> èª 1</label>
                <label><input type="checkbox" class="preset-check" value="â†²"> èª 2</label>
                <label><input type="checkbox" class="preset-check" value="â†²"> èª 3</label>
                <label><input type="checkbox" class="preset-check" value="ã•ã‚ˆãªã‚‰"> èª 4</label>
                <label><input type="checkbox" class="preset-check" value="ä¿ºã¯æ­¢ã¾ã‚“ã­ã‡ã‹ã‚‰ã‚ˆã€"> ã‚ªãƒ«ã‚¬1</label>
                <label><input type="checkbox" class="preset-check" value="å‰ã‚‰ãŒæ­¢ã¾ã‚“ã­ã‡ã‹ãã‚Šã€"> ã‚ªãƒ«ã‚¬2</label>
                <label><input type="checkbox" class="preset-check" value="ãã®å…ˆã«ä¿ºã¯ã„ã‚‹ãï¼...ã ã‹ã‚‰ã‚ˆã€"> ã‚ªãƒ«ã‚¬3</label>
                <label><input type="checkbox" class="preset-check" value="æ­¢ã¾ã‚‹ã‚“ã˜ã‚ƒã­ã‡ãâ€¦ã€‚"> ã‚ªãƒ«ã‚¬4</label>
                <label><input type="checkbox" class="preset-check" value="ãŠçˆ¶ã•ã‚“ãŠæ¯ã•ã‚“ã®è¨€ã†ã“ã¨ã‚’èãã“ã¨"> 01.ãŠçˆ¶ã•ã‚“</label>
                <label><input type="checkbox" class="preset-check" value="ãŠã¨ã†ã•ã‚“ãŠã‹ã‚ã•ã‚“ã®ã„ã†ã“ã¨ã‚’ããã“ã¨"> 02.ãŠã¨ã†ã•</label>
                <label><input type="checkbox" class="preset-check" value="å¥½ãå«Œã„ãªãä½•ã§ã‚‚é£Ÿã¹ã‚‹ã“ã¨"> 03.å¥½ãå«Œã„</label>
                <label><input type="checkbox" class="preset-check" value="ã™ããã‚‰ã„ãªããªã‚“ã§ã‚‚ãŸã¹ã‚‹ã“ã¨"> 04.ã™ããã‚‰</label>
                <label><input type="checkbox" class="preset-check" value="ãŠæ‰‹ä¼ã„ã‚’ã™ã‚‹ã“ã¨"> 05.ãŠæ‰‹ä¼ã„</label>
                <label><input type="checkbox" class="preset-check" value="ãŠã¦ã¤ã ã„ã‚’ã™ã‚‹ã“ã¨"> 06.ãŠã¦ã¤ã </label>
                <label><input type="checkbox" class="preset-check" value="ã„ã¤ã‚‚ç¬‘é¡”ã§ã‚ã„ã•ã¤ã™ã‚‹ã“ã¨"> 07.ã„ã¤ã‚‚ç¬‘</label>
                <label><input type="checkbox" class="preset-check" value="ã„ã¤ã‚‚ãˆãŒãŠã§ã‚ã„ã•ã¤ã™ã‚‹ã“ã¨"> 08.ã„ã¤ã‚‚ãˆ</label>
                <label><input type="checkbox" class="preset-check" value="ãŠå‹‰å¼·ã‚’é ‘å¼µã‚‹ã“ã¨"> 09.ãŠå‹‰å¼·ã‚’</label>
                <label><input type="checkbox" class="preset-check" value="ãŠã¹ã‚“ãã‚‡ã†ã‚’ãŒã‚“ã°ã‚‹ã“ã¨"> 10.ãŠã¹ã‚“ã</label>
                <label><input type="checkbox" class="preset-check" value="ã‚²ãƒ¼ãƒ ã‚’ã‚„ã‚Šã™ããªã„ã“ã¨"> 11.ã‚²ãƒ¼ãƒ ã‚’</label>
                <label><input type="checkbox" class="preset-check" value="äº¤é€šãƒ«ãƒ¼ãƒ«ã‚’å®ˆã‚‹ã“ã¨"> 12.äº¤é€šãƒ«ãƒ¼</label>
                <label><input type="checkbox" class="preset-check" value="ã“ã†ã¤ã†ãƒ«ãƒ¼ãƒ«ã‚’ã¾ã‚‚ã‚‹ã“ã¨"> 13.ã“ã†ã¤ã†</label>
                <label><input type="checkbox" class="preset-check" value="ãŠå‹é”ã¨ä»²è‰¯ãã™ã‚‹ã“ã¨"> 14.ãŠå‹é”ã¨</label>
                <label><input type="checkbox" class="preset-check" value="ãŠã¨ã‚‚ã ã¡ã¨ãªã‹ã‚ˆãã™ã‚‹ã“ã¨"> 15.ãŠã¨ã‚‚ã </label>
                <label><input type="checkbox" class="preset-check" value="ç´„æŸã‚’å®ˆã‚‹ã“ã¨"> 16.ç´„æŸã‚’å®ˆ</label>
                <label><input type="checkbox" class="preset-check" value="ã‚„ãããã‚’ã¾ã‚‚ã‚‹ã“ã¨"> 17.ã‚„ããã</label>
                <label><input type="checkbox" class="preset-check" value="ã‚¦ã‚½ã‚’ã¤ã‹ãªã„ã“ã¨"> 18.ã‚¦ã‚½ã‚’ã¤</label>
            </div>

            <div id="free-input-area" style="display: flex; flex-direction: column; gap: 5px;">
                <input type="text" class="line-input" maxlength="24" placeholder="è‡ªç”±å…¥åŠ› 1è¡Œç›®">
                <input type="text" class="line-input" maxlength="24" placeholder="è‡ªç”±å…¥åŠ› 2è¡Œç›®">
                <input type="text" class="line-input" maxlength="24" placeholder="è‡ªç”±å…¥åŠ› 3è¡Œç›®">
                <input type="text" class="line-input" maxlength="24" placeholder="è‡ªç”±å…¥åŠ› 4è¡Œç›®">
            </div>
        </div>
        
        <label>è¿½åŠ ç”»åƒ:</label>
        <input type="file" id="image-upload" accept="image/*">

        <div class="slider-group">
            <label>å·¦å³ã®ä½ç½®</label>
            <input type="range" id="h-slider" min="-100" max="100" value="0">
        </div>

        <div class="slider-group">
            <label>ä¸Šä¸‹ã®ä½ç½®</label>
            <input type="range" id="v-slider" min="-100" max="100" value="0">
        </div>

        <div class="slider-group">
            <label>å¤§ãã•ï¼ˆï¼…ï¼‰</label>
            <input type="range" id="size-slider" min="10" max="200" value="100">
        </div>
        
        <button id="download-btn">ç”»åƒã‚’æ›¸ãå‡ºã™</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.min.js"></script>
    <script>
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«æ—¥ä»˜ã‚’è‡ªå‹•è¨­å®š
        window.addEventListener('DOMContentLoaded', () => {
            const now = new Date();
            
            // æ•°å­—ã‚’è£…é£¾ä»˜ãã§è¿”ã™é–¢æ•°
            const formatWithSpan = (date) => {
                const y = `<span class="date-num">${date.getFullYear()}</span>`;
                const m = `<span class="date-num">${String(date.getMonth() + 1).padStart(2, '0')}</span>`;
                const d = `<span class="date-num">${String(date.getDate()).padStart(2, '0')}</span>`;
                return { y, m, d };
            };

            const today = formatWithSpan(now);
            
            // 1å¹´å¾Œã®è¨ˆç®—
            const nextYearDate = new Date();
            nextYearDate.setFullYear(now.getFullYear() + 1);
            const nextYear = formatWithSpan(nextYearDate);

            // æœ‰åŠ¹æœŸé™ã®åæ˜ 
            const expireEl = document.getElementById('text-expire');
            if (expireEl) {
                expireEl.innerHTML = `${nextYear.y}<span class="unit">å¹´</span>${nextYear.m}<span class="unit">æœˆ</span>${nextYear.d}<span class="unit">æ—¥ã¾ã§æœ‰åŠ¹</span>`;
            }

            // äº¤ä»˜æ—¥ãªã©ã®åæ˜ 
            const kofuEl = document.getElementById('text-kofu');
            if (kofuEl) {
                kofuEl.innerHTML = `${today.y}<span class="unit">å¹´</span>${today.m}<span class="unit">æœˆ</span>${today.d}<span class="unit">æ—¥</span>`;
            }
            
            // å¾’æ­©ãƒ»ä»–ãªã©ã®é …ç›®ï¼ˆå¿…è¦ã§ã‚ã‚Œã°åŒæ§˜ã«åæ˜ ï¼‰
            const walkEl = document.getElementById('text-walk');
            if (walkEl) {
                walkEl.innerHTML = `${today.y}<span class="unit">å¹´</span>${today.m}<span class="unit">æœˆ</span>${today.d}<span class="unit">æ—¥</span>`;
            }

            // 4. ä»–ï¼ˆtext-otherï¼‰ 
            const otherEl = document.getElementById('text-other');
            if (otherEl) {
                otherEl.innerHTML = `${today.y}<span class="unit">å¹´</span>${today.m}<span class="unit">æœˆ</span>${today.d}<span class="unit">æ—¥</span>`;
            }

            // 4. ä»–ï¼ˆtext-otherï¼‰ 
            const carEl = document.getElementById('text-car');
            if (carEl) {
                carEl.innerHTML = `<span class="date-hatena">????</span><span class="unit">å¹´</span><span class="date-hatena">??</span><span class="unit">æœˆ</span><span class="date-hatena">??</span><span class="unit">æ—¥</span>`;
            }
        });

        // 1. è¦ç´ ã®å–å¾—
        const input1 = document.getElementById('input-1');
        const input2 = document.getElementById('input-2');
        const input3 = document.getElementById('input-3');
        const out1 = document.getElementById('text-out-1');
        const out2 = document.getElementById('text-out-2');
        const out3 = document.getElementById('text-out-3');

        const imageUpload = document.getElementById('image-upload');
        const uploadedImg = document.getElementById('uploaded-image');
        const hSlider = document.getElementById('h-slider');
        const vSlider = document.getElementById('v-slider');
        const sizeSlider = document.getElementById('size-slider');
        const checkboxes = document.querySelectorAll('.preset-check');
        const lineInputs = document.querySelectorAll('.line-input');

        // 2. ãƒ†ã‚­ã‚¹ãƒˆåæ˜ ï¼ˆç©ºã®çŠ¶æ…‹ã‹ã‚‰å…¥åŠ›ã§ãã‚‹ã‚ˆã†ã«ä¿®æ­£ï¼‰
        input1.addEventListener('input', () => { out1.innerText = input1.value; });

        input2.addEventListener('input', () => {
            let val = input2.value.replace(/\D/g, '');
            if (val.length === 8) {
                const y = val.substring(0, 4);
                const m = val.substring(4, 6);
                const d = val.substring(6, 8);
                out2.innerHTML = `${y}<span class="unit">å¹´</span>${m}<span class="unit">æœˆ</span>${d}<span class="unit">æ—¥ç”Ÿ</span>`;
            } else {
                out2.innerText = val;
            }
        });

        // 3. ãƒ†ã‚­ã‚¹ãƒˆåæ˜ ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ or è‡ªç”±æ–‡ï¼‰
        function updateLicenseText() {
            let selectedPresets = [];
            
            //3-1. ãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸå®šå‹æ–‡ã‚’å–å¾—
            checkboxes.forEach(cb => {
                if (cb.checked) selectedPresets.push(cb.value);
            });

            // 3-2. ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®æ•°ã«å¿œã˜ã¦è‡ªç”±å…¥åŠ›æ¬„ã®æœ‰åŠ¹/ç„¡åŠ¹ã‚’åˆ‡ã‚Šæ›¿ãˆ
            // å®šå‹æ–‡ã§åŸ‹ã¾ã£ãŸè¡Œä»¥é™ã®ã¿å…¥åŠ›å¯èƒ½ã«ã™ã‚‹
            lineInputs.forEach((input, index) => {
                if (index < selectedPresets.length) {
                    input.disabled = true;
                    input.style.backgroundColor = "#eee";
                    input.value = ""; // ç„¡åŠ¹åŒ–ã•ã‚ŒãŸã‚‰ä¸­èº«ã‚’æ¶ˆã™
                } else {
                    input.disabled = false;
                    input.style.backgroundColor = "#fff";
                }
            });

            // 3-3. è¡¨ç¤ºç”¨ã®é…åˆ—ã‚’ä½œæˆï¼ˆå®šå‹æ–‡ + è‡ªç”±å…¥åŠ›ï¼‰
            let finalLines = [...selectedPresets];
            lineInputs.forEach((input) => {
                if (!input.disabled && input.value !== "") {
                    finalLines.push(input.value);
                }
            });

            // 3-4. æœ€å¤§4è¡Œã§ã‚«ãƒƒãƒˆã—ã¦è¡¨ç¤º
            out3.innerText = finalLines.slice(0, 4).join('\n');
        }

        // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        checkboxes.forEach(cb => {
            cb.addEventListener('change', () => {
                const checkedCount = document.querySelectorAll('.preset-check:checked').length;
                if (checkedCount > 4) {
                    cb.checked = false; // 4ã¤ã‚’è¶…ãˆãŸã‚‰ãƒã‚§ãƒƒã‚¯ã•ã›ãªã„
                    alert("ãŠç´„æŸã¯æœ€å¤§4ã¤ã¾ã§ã§ã™ã€‚");
                }
                updateLicenseText();
            });
        });

        // è‡ªç”±å…¥åŠ›æ¬„ã®ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        lineInputs.forEach(input => {
            input.addEventListener('input', updateLicenseText);
        });

        // 4. ç”»åƒã®ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°ï¼ˆè¦‹åˆ‡ã‚Œé˜²æ­¢ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
        function updateImageStyle() {
            const scale = sizeSlider.value / 100;
            const x = hSlider.value;
            const y = vSlider.value;
            
            // è¦‹åˆ‡ã‚Œã‚’é˜²ããŸã‚ã€widthã‚’ç›´æ¥æ“ä½œã™ã‚‹ã‚ˆã†ã«å¤‰æ›´
            uploadedImg.style.height = (100 * scale) + "%";
            uploadedImg.style.left = `calc(50% + ${x}px)`;
            uploadedImg.style.top = `calc(50% + ${y}px)`;
            uploadedImg.style.transform = "translate(-50%, -50%)";
        }

        // 5. ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ
        imageUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    uploadedImg.src = event.target.result;
                    uploadedImg.style.display = 'block';
                    // èª­ã¿è¾¼ã¿å®Œäº†å¾Œã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨
                    setTimeout(updateImageStyle, 50);
                };
                reader.readAsDataURL(file);
            }
        });

        [hSlider, vSlider, sizeSlider].forEach(slider => {
            slider.addEventListener('input', updateImageStyle);
        });

        // 6. ä¿å­˜å‡¦ç†ï¼ˆhtml-to-imageç‰ˆï¼‰
        document.getElementById('download-btn').addEventListener('click', function() {
            const target = document.getElementById('canvas-container');
            const frame = document.getElementById('photo-frame');
            
            // ä¿å­˜æ™‚ã®ã¿æ ç·šã‚’æ¶ˆã™
            const originalBorder = frame.style.border;
            frame.style.border = "none";

            // htmlToImageãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
            if (typeof htmlToImage === 'undefined') {
                alert("ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚headå†…ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¿ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
                frame.style.border = originalBorder;
                return;
            }

            htmlToImage.toPng(target, {
                width: 800,
                height: 500,
                pixelRatio: 2
            })
            .then(function (dataUrl) {
                const link = document.createElement('a');
                link.download = 'my-license-card.png';
                link.href = dataUrl;
                link.click();
                frame.style.border = originalBorder;
            })
            .catch(function (error) {
                console.error('ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
                alert("ç”»åƒã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
                frame.style.border = originalBorder;
            });
        });

        //PCç‰ˆè¡¨ç¤ºç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
        document.getElementById('desktop-mode-btn').addEventListener('click', function() {
            // metaã‚¿ã‚°ï¼ˆviewportï¼‰ã‚’æ¢ã™
            let viewport = document.querySelector('meta[name="viewport"]');
            
            if (!viewport) {
                // ã‚‚ã—metaã‚¿ã‚°ãŒãªã‘ã‚Œã°æ–°ã—ãä½œã‚‹
                viewport = document.createElement('meta');
                viewport.name = "viewport";
                document.head.appendChild(viewport);
            }

            // ç¾åœ¨ã®çŠ¶æ…‹ã‚’åˆ¤å®šã—ã¦åˆ‡ã‚Šæ›¿ãˆ
            if (this.dataset.mode === 'desktop') {
                // ã‚¹ãƒãƒ›ç‰ˆã«æˆ»ã™
                viewport.setAttribute('content', 'width=device-width, initial-scale=1.0');
                this.innerText = "ğŸ’» PCç‰ˆè¡¨ç¤ºã«åˆ‡ã‚Šæ›¿ãˆã‚‹";
                this.style.backgroundColor = "#6c757d";
                this.dataset.mode = 'mobile';
            } else {
                // PCç‰ˆã«å¼·åˆ¶
                // å…è¨±è¨¼ã®å¹…ã«åˆã‚ã›ã¦ 800 (ã‚‚ã—ãã¯å°‘ã—ä½™è£•ã‚’æŒã£ã¦ 850) ã«å›ºå®š
                viewport.setAttribute('content', 'width=800');
                this.innerText = "ğŸ“± ã‚¹ãƒãƒ›ç‰ˆè¡¨ç¤ºã«æˆ»ã™";
                this.style.backgroundColor = "#28a745"; // åˆ‡ã‚Šæ›¿ã‚ã£ãŸã“ã¨ãŒã‚ã‹ã‚‹ã‚ˆã†ã«ç·‘ã«
                this.dataset.mode = 'desktop';
                
                alert("PCç‰ˆè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã«ã—ã¾ã—ãŸã€‚ç”»é¢ãŒå°ã•ãè¦‹ãˆã‚‹å ´åˆã¯ãƒ”ãƒ³ãƒã‚¢ã‚¦ãƒˆï¼ˆæ‹¡å¤§ï¼‰ã—ã¦æ“ä½œã—ã¦ãã ã•ã„ã€‚");
            }
        });
    </script>

<!--/////-->

    <script src="./script/click.js"></script>
    <script src="./script/stalker.js"></script>
    <script src="./script/slideshow.js"></script>
    <script src="./script/CanvasAnimation.js"></script>
    <script src="./script/import.js"></script>
    <!--<script src="./script/first.js" defer></script>-->
    <script src="./script/clipboad.js"></script>
    <script src="./script/load.js"></script>
    <script src="./script/sidebar.js"></script>
</div>

    <div class="hero-container2">
        <div class="environment"></div>
        <div class="hero glitch layers fs-b5 fs-h8 text-shadow-2b" data-text="Â© å°é³¥Labç ”ç©¶æ‰€"><span class="color-000">Â© å°é³¥Labç ”ç©¶æ‰€</span></div>
    </div>
</body>

</html>